import{a as _}from"./index-cd6d6b34.js";import{c as C}from"./warehouseTaking-2c283aca.js";import{r as S}from"./common-938b41ea.js";import{T as V}from"./warehouseWorking-497fd91f.js";import{i as s}from"./i18n-0af8b262.js";import{I as y}from"./formRule-3feb276f.js";import{d as B,b,c as N,r as v,w as D,a as e,x as F,v as j,s as a,q as t,u as W,at as m,y as k,ap as R,ac as O}from"./runtime-core.esm-bundler-1bbee395.js";import{_ as U}from"./_plugin-vue_export-helper-c27b6911.js";import"./request-e1053d5a.js";import"./index-f4e4efab.js";import"./index-827f2091.js";import"./vue-router-1283ad2d.js";import"./index-ae8f073f.js";const A={class:"mb-4",style:{color:"#999999"}},G=B({__name:"number-input",props:{showDialog:{type:Boolean},form:null},emits:["close","saveSuccess"],setup(w,{emit:d}){const p=w,f=b(),l=N(()=>p.showDialog),n=v({showCommodityDialogSelect:!1,showLocationDialogSelect:!1,form:b({id:0,job_code:"",job_status:V,sku_id:0,goods_owner_id:0,goods_location_id:0,book_qty:0,counted_qty:0,difference_qty:0,spu_code:"",spu_name:"",sku_code:"",warehouse_name:"",location_name:"",adjust_status:!1,handler:"",handle_time:"",series_number:""}),rules:{book_qty:[o=>!!o||`${s.global.t("system.checkText.mustInput")}${s.global.t("wms.warehouseWorking.warehouseTaking.book_qty")}!`],counted_qty:[o=>!!o||`${s.global.t("system.checkText.mustInput")}${s.global.t("wms.warehouseWorking.warehouseTaking.counted_qty")}!`,o=>y(o,"nonNegative")===""||y(o,"nonNegative")]}}),c=v({closeDialog:()=>{d("close")},initForm:()=>{n.form=p.form},submit:async()=>{const{valid:o}=await f.value.validate(),r=c.constructFormBody();if(o){const{data:i}=await C(r);if(!i.isSuccess){_.$message({type:"error",content:i.errorMessage});return}_.$message({type:"success",content:`${s.global.t("system.page.submit")}${s.global.t("system.tips.success")}`}),d("saveSuccess")}else _.$message({type:"error",content:s.global.t("system.checkText.checkFormFail")})},constructFormBody:()=>{let o={...n.form};return o=S(o),o}});return D(()=>l.value,o=>{o&&c.initForm()}),(o,r)=>{const i=e("v-toolbar"),h=e("v-text-field"),$=e("v-form"),q=e("v-card-text"),g=e("v-btn"),T=e("v-card-actions"),x=e("v-card"),I=e("v-dialog");return F(),j(I,{modelValue:R(l),"onUpdate:modelValue":r[1]||(r[1]=u=>O(l)?l.value=u:null),width:"20%",transition:"dialog-top-transition",persistent:!0},{default:a(()=>[t(x,null,{default:a(()=>[t(i,{color:"white",title:`${o.$t("router.sideBar.warehouseTaking")}`},null,8,["title"]),t(q,null,{default:a(()=>[W("p",A,m(o.$t("wms.warehouseWorking.warehouseTaking.book_qty"))+"ï¼š"+m(n.form.book_qty),1),t($,{ref_key:"formRef",ref:f},{default:a(()=>[t(h,{modelValue:n.form.counted_qty,"onUpdate:modelValue":r[0]||(r[0]=u=>n.form.counted_qty=u),label:o.$t("wms.warehouseWorking.warehouseTaking.counted_qty"),rules:n.rules.counted_qty,variant:"outlined",clearable:""},null,8,["modelValue","label","rules"])]),_:1},512)]),_:1}),t(T,{class:"justify-end"},{default:a(()=>[t(g,{variant:"text",onClick:c.closeDialog},{default:a(()=>[k(m(o.$t("system.page.close")),1)]),_:1},8,["onClick"]),t(g,{color:"primary",variant:"text",onClick:c.submit},{default:a(()=>[k(m(o.$t("system.page.submit")),1)]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}}});const eo=U(G,[["__scopeId","data-v-176dab9c"]]);export{eo as default};
