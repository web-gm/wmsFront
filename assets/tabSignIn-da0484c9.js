import{i as c,w as I}from"./i18n-0af8b262.js";import{x as S}from"./index-ae8f073f.js";import{a as P,b as C}from"./style-b9bc59b4.js";import{D as k,a as F,c as V,P as T,b as E}from"./system-93ae242b.js";import{a as x}from"./index-cd6d6b34.js";import{u as z}from"./deliveryManagement-7eebd823.js";import{_ as L}from"./tooltip-btn.vue_vue_type_script_setup_true_lang-fc6ce76f.js";import{G as f}from"./commodityManagement-a1debff9.js";import{g as U,s as A}from"./common-938b41ea.js";import{_ as q}from"./search-delivered-detail.vue_vue_type_script_setup_true_lang-20446111.js";import{e as B}from"./exportTable-b0d17537.js";import{B as G}from"./btnGroup-26ff2079.js";import{d as H,b as g,r as b,o as N,c as w,w as O,a as u,x as j,m as K,u as m,q as e,s,y as Q,at as p,ap as r,as as R,O as W}from"./runtime-core.esm-bundler-1bbee395.js";import{_ as Z}from"./_plugin-vue_export-helper-c27b6911.js";import"./index-f4e4efab.js";import"./request-e1053d5a.js";import"./index-827f2091.js";import"./vue-router-1283ad2d.js";const Y={class:"operateArea"},J={style:{width:"100%",display:"flex","justify-content":"center"}},X=H({__name:"tabSignIn",setup(ee,{expose:v}){const _=g(),a=b({showDeliveredDetailID:0,showDeliveredDetail:!1,dialogForm:{id:0},searchForm:{dispatch_no:"",customer_name:"",spu_name:""},timer:g(null),activeTab:null,tableData:g([]),tablePage:g({total:0,pageIndex:1,pageSize:k,searchObjects:[]}),btnList:[],authorityList:U()}),o=b({closeDeliveredDetail:()=>{a.showDeliveredDetail=!1},viewRow:t=>{a.showDeliveredDetailID=t.id,a.showDeliveredDetail=!0},refresh:()=>{o.getSignIn()},getSignIn:async()=>{const{data:t}=await z(a.tablePage);if(!t.isSuccess){x.$message({type:"error",content:t.errorMessage});return}a.tableData=t.data.rows,a.tablePage.total=t.data.totals},handlePageChange:g(({currentPage:t,pageSize:n})=>{a.tablePage.pageIndex=t,a.tablePage.pageSize=n,o.getSignIn()}),exportTable:()=>{const t=_.value;B({table:t,filename:c.global.t("wms.deliveryManagement.signedIn"),columnFilterMethod({column:n}){return!["checkbox"].includes(n==null?void 0:n.type)&&!["operate"].includes(n==null?void 0:n.field)}})},sureSearch:()=>{a.tablePage.searchObjects=A(a.searchForm),o.getSignIn()}});N(()=>{a.btnList=[{name:c.global.t("system.page.refresh"),icon:"mdi-refresh",code:"",click:o.refresh},{name:c.global.t("system.page.export"),icon:"mdi-export-variant",code:"signedIn-export",click:o.exportTable}]});const $=w(()=>P({})),D=w(()=>C({}));return O(()=>a.searchForm,()=>{a.timer&&clearTimeout(a.timer),a.timer=setTimeout(()=>{a.timer=null,o.sureSearch()},F)},{deep:!0}),v({getSignIn:o.getSignIn}),(t,n)=>{const d=u("v-col"),h=u("v-text-field"),y=u("v-row"),l=u("vxe-column"),M=u("vxe-table");return j(),K(W,null,[m("div",Y,[e(y,{"no-gutters":""},{default:s(()=>[e(d,{cols:"3",class:"col"},{default:s(()=>[e(G,{"authority-list":a.authorityList,"btn-list":a.btnList},null,8,["authority-list","btn-list"])]),_:1}),e(d,{cols:"9"},{default:s(()=>[e(y,{"no-gutters":"",onKeyup:I(o.sureSearch,["enter"])},{default:s(()=>[e(d,{cols:"4"},{default:s(()=>[e(h,{modelValue:a.searchForm.dispatch_no,"onUpdate:modelValue":n[0]||(n[0]=i=>a.searchForm.dispatch_no=i),clearable:"","hide-details":"",density:"comfortable",class:"searchInput ml-5 mt-1",label:t.$t("wms.deliveryManagement.dispatch_no"),variant:"solo"},null,8,["modelValue","label"])]),_:1}),e(d,{cols:"4"},{default:s(()=>[e(h,{modelValue:a.searchForm.customer_name,"onUpdate:modelValue":n[1]||(n[1]=i=>a.searchForm.customer_name=i),clearable:"","hide-details":"",density:"comfortable",class:"searchInput ml-5 mt-1",label:t.$t("wms.deliveryManagement.customer_name"),variant:"solo"},null,8,["modelValue","label"])]),_:1}),e(d,{cols:"4"},{default:s(()=>[e(h,{modelValue:a.searchForm.spu_name,"onUpdate:modelValue":n[2]||(n[2]=i=>a.searchForm.spu_name=i),clearable:"","hide-details":"",density:"comfortable",class:"searchInput ml-5 mt-1",label:t.$t("wms.deliveryManagement.spu_name"),variant:"solo"},null,8,["modelValue","label"])]),_:1})]),_:1},8,["onKeyup"])]),_:1})]),_:1})]),m("div",{class:"mt-5",style:R({height:r($)})},[e(M,{ref_key:"xTable",ref:_,"column-config":{minWidth:"100px"},data:a.tableData,height:r(D),align:"center"},{empty:s(()=>[Q(p(r(c).global.t("system.page.noData")),1)]),default:s(()=>[e(l,{type:"seq",width:"60"}),e(l,{field:"dispatch_no",title:t.$t("wms.deliveryManagement.dispatch_no")},null,8,["title"]),e(l,{field:"spu_code",title:t.$t("wms.deliveryManagement.spu_code")},null,8,["title"]),e(l,{field:"spu_description",width:"200px",title:t.$t("wms.deliveryManagement.spu_description")},null,8,["title"]),e(l,{field:"spu_name",title:t.$t("wms.deliveryManagement.spu_name")},null,8,["title"]),e(l,{field:"sku_code",title:t.$t("wms.deliveryManagement.sku_code")},null,8,["title"]),e(l,{field:"bar_code",title:t.$t("wms.deliveryManagement.bar_code")},null,8,["title"]),e(l,{field:"qty",title:t.$t("wms.deliveryManagement.order_qty")},null,8,["title"]),e(l,{field:"weight",title:t.$t("wms.deliveryManagement.detailWeight")},{default:s(({row:i})=>[m("span",null,p(`${i.weight} ${r(f)("weight",i.weight_unit)}`),1)]),_:1},8,["title"]),e(l,{field:"volume",title:t.$t("wms.deliveryManagement.detailVolume")},{default:s(({row:i})=>[m("span",null,p(`${i.volume} ${r(f)("volume",i.volume_unit)}`),1)]),_:1},8,["title"]),e(l,{field:"weighing_weight",title:t.$t("wms.deliveryManagement.weighing_weight")},{default:s(({row:i})=>[m("span",null,p(`${i.weighing_weight} ${r(f)("weight",i.weight_unit)}`),1)]),_:1},8,["title"]),e(l,{field:"package_person",title:t.$t("wms.deliveryManagement.package_person")},null,8,["title"]),e(l,{field:"weighing_person",title:t.$t("wms.deliveryManagement.weighing_person")},null,8,["title"]),e(l,{field:"waybill_no",title:t.$t("wms.deliveryManagement.waybill_no")},null,8,["title"]),e(l,{field:"carrier",title:t.$t("wms.deliveryManagement.carrier")},null,8,["title"]),e(l,{field:"damagedQuantity",title:t.$t("wms.deliveryManagement.damagedQuantity")},{default:s(({row:i})=>[m("span",null,p(`${r(S).subtract(Number(i.qty),Number(i.sign_qty))}`),1)]),_:1},8,["title"]),e(l,{field:"weighing_no",title:t.$t("wms.deliveryManagement.weighing_no")},null,8,["title"]),e(l,{field:"customer_name",title:t.$t("wms.deliveryManagement.customer_name")},null,8,["title"]),e(l,{field:"creator",title:t.$t("wms.deliveryManagement.creator")},null,8,["title"]),e(l,{field:"create_time",width:"170px",formatter:["formatDate","yyyy-MM-dd HH:mm"],title:t.$t("wms.deliveryManagement.create_time")},null,8,["title"]),e(l,{field:"operate",title:t.$t("system.page.operate"),width:"120",resizable:!1,"show-overflow":""},{default:s(({row:i})=>[m("div",J,[e(L,{flat:!0,icon:"mdi-eye-outline","tooltip-text":t.$t("system.page.view"),onClick:te=>o.viewRow(i)},null,8,["tooltip-text","onClick"])])]),_:1},8,["title"])]),_:1},8,["data","height"]),e(V,{"current-page":a.tablePage.pageIndex,"page-size":a.tablePage.pageSize,perfect:"",total:a.tablePage.total,"page-sizes":r(T),layouts:r(E),onPageChange:o.handlePageChange},null,8,["current-page","page-size","total","page-sizes","layouts","onPageChange"]),e(q,{id:a.showDeliveredDetailID,"show-dialog":a.showDeliveredDetail,onClose:o.closeDeliveredDetail},null,8,["id","show-dialog","onClose"])],4)],64)}}});const we=Z(X,[["__scopeId","data-v-bda5b6ab"]]);export{we as default};
