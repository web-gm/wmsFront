import{i as c}from"./i18n-0af8b262.js";import{a as _}from"./index-cd6d6b34.js";import{h as f}from"./request-e1053d5a.js";import{S as n}from"./formRule-3feb276f.js";import{r as T}from"./common-938b41ea.js";import{d as j,b as V,c as S,r as $,w as B,a as s,x as N,v as R,s as m,q as a,y as C,at as k,ap as F,ac as I}from"./runtime-core.esm-bundler-1bbee395.js";import{_ as M}from"./_plugin-vue_export-helper-c27b6911.js";const W=()=>f({url:"/company/all",method:"get"}),q=r=>f({url:"/company",method:"post",data:r}),z=r=>f({url:"/company",method:"put",data:r}),X=r=>f({url:"/company",method:"delete",params:{id:r}}),A=j({__name:"add-or-update-company",props:{showDialog:{type:Boolean},form:null},emits:["close","saveSuccess"],setup(r,{emit:y}){const u=r,g=V(),i=S(()=>u.showDialog),w=S(()=>u.form.id&&u.form.id>0?"update":"add"),t=$({form:V({id:0,company_name:"",city:"",address:"",manager:"",contact_tel:""}),rules:{company_name:[e=>!!e||`${c.global.t("system.checkText.mustInput")}${c.global.t("base.companySetting.company_name")}!`,e=>n(e,0,256)===""||n(e,0,256)],city:[e=>n(e,0,128)===""||n(e,0,128)],address:[e=>n(e,0,256)===""||n(e,0,256)],manager:[e=>n(e,0,64)===""||n(e,0,64)],contact_tel:[e=>n(e,0,64)===""||n(e,0,64)]}}),b=$({closeDialog:()=>{y("close")},submit:async()=>{const{valid:e}=await g.value.validate();if(e){const o=T(t.form),{data:p}=w.value==="add"?await q(o):await z(o);if(!p.isSuccess){_.$message({type:"error",content:p.errorMessage});return}_.$message({type:"success",content:`${c.global.t("system.page.submit")}${c.global.t("system.tips.success")}`}),y("saveSuccess")}else _.$message({type:"error",content:c.global.t("system.checkText.checkFormFail")})}});return B(()=>i.value,e=>{e&&(t.form=u.form)}),(e,o)=>{const p=s("v-toolbar"),d=s("v-text-field"),U=s("v-form"),h=s("v-card-text"),v=s("v-btn"),x=s("v-card-actions"),D=s("v-card"),O=s("v-dialog");return N(),R(O,{modelValue:F(i),"onUpdate:modelValue":o[5]||(o[5]=l=>I(i)?i.value=l:null),width:"30%",transition:"dialog-top-transition",persistent:!0},{default:m(()=>[a(D,null,{default:m(()=>[a(p,{color:"white",title:`${e.$t("router.sideBar.companySetting")}`},null,8,["title"]),a(h,null,{default:m(()=>[a(U,{ref_key:"formRef",ref:g},{default:m(()=>[a(d,{modelValue:t.form.company_name,"onUpdate:modelValue":o[0]||(o[0]=l=>t.form.company_name=l),label:e.$t("base.companySetting.company_name"),rules:t.rules.company_name,variant:"outlined"},null,8,["modelValue","label","rules"]),a(d,{modelValue:t.form.city,"onUpdate:modelValue":o[1]||(o[1]=l=>t.form.city=l),label:e.$t("base.companySetting.city"),rules:t.rules.city,variant:"outlined"},null,8,["modelValue","label","rules"]),a(d,{modelValue:t.form.address,"onUpdate:modelValue":o[2]||(o[2]=l=>t.form.address=l),label:e.$t("base.companySetting.address"),rules:t.rules.address,variant:"outlined"},null,8,["modelValue","label","rules"]),a(d,{modelValue:t.form.manager,"onUpdate:modelValue":o[3]||(o[3]=l=>t.form.manager=l),label:e.$t("base.companySetting.manager"),rules:t.rules.manager,variant:"outlined"},null,8,["modelValue","label","rules"]),a(d,{modelValue:t.form.contact_tel,"onUpdate:modelValue":o[4]||(o[4]=l=>t.form.contact_tel=l),label:e.$t("base.companySetting.contact_tel"),rules:t.rules.contact_tel,variant:"outlined"},null,8,["modelValue","label","rules"])]),_:1},512)]),_:1}),a(x,{class:"justify-end"},{default:m(()=>[a(v,{variant:"text",onClick:b.closeDialog},{default:m(()=>[C(k(e.$t("system.page.close")),1)]),_:1},8,["onClick"]),a(v,{color:"primary",variant:"text",onClick:b.submit},{default:m(()=>[C(k(e.$t("system.page.submit")),1)]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}}});const L=M(A,[["__scopeId","data-v-6a3dbe51"]]),Y=Object.freeze(Object.defineProperty({__proto__:null,default:L},Symbol.toStringTag,{value:"Module"}));export{L as a,Y as b,X as d,W as g};
