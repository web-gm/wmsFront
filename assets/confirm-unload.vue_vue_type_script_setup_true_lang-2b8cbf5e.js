import{i as C}from"./i18n-0af8b262.js";import{a as T}from"./index-cd6d6b34.js";import{b as A}from"./formatSystem-1203ad16.js";import{_ as w}from"./tooltip-btn.vue_vue_type_script_setup_true_lang-fc6ce76f.js";import{D as L,a as O,c as B,P as j,b as N}from"./system-93ae242b.js";import{c as R,S as G}from"./style-b9bc59b4.js";import{s as H}from"./common-938b41ea.js";import{b as q}from"./userManagement-c79709d8.js";import{d as V,b as g,r as f,c as Y,w as Z,a as s,x,v as W,s as o,q as t,u as D,as as J,ap as _,y as b,at as c,m as K,O as Q}from"./runtime-core.esm-bundler-1bbee395.js";import{_ as X}from"./_plugin-vue_export-helper-c27b6911.js";import{s as ee}from"./index-f4e4efab.js";const ae={class:"dataTable"},te=V({__name:"employee-select",emits:["sureSelect"],setup(I,{expose:P,emit:S}){const d=g(),e=f({showDialog:!1,tableData:[],tablePage:f({total:0,pageIndex:1,pageSize:L,searchObjects:g([])}),searchForm:{user_num:"",user_name:"",user_role:""},timer:g(null)}),l=f({handlePageChange:g(({currentPage:a,pageSize:r})=>{e.tablePage.pageIndex=a,e.tablePage.pageSize=r,l.getList()}),sureSearch:()=>{e.tablePage.searchObjects=H(e.searchForm),l.getList()},getList:async()=>{const{data:a}=await q(e.tablePage);if(!a.isSuccess){T.$message({type:"error",content:a.errorMessage});return}e.tableData=a.data.rows,e.tablePage.total=a.data.totals},resetForm:()=>{for(const a in e.searchForm){const r=a;e.searchForm[r]=""}e.tablePage.searchObjects=[]},submit:()=>{const a=d.value.getCheckboxRecords();S("sureSelect",a),l.closeDialog()},openDialog:()=>{l.getList(),e.showDialog=!0},closeDialog:()=>{e.showDialog=!1}});P({openDialog:l.openDialog,closeDialog:l.closeDialog});const n=Y(()=>R({}));return Z(()=>e.searchForm,()=>{e.timer&&clearTimeout(e.timer),e.timer=setTimeout(()=>{e.timer=null,l.sureSearch()},O)},{deep:!0}),(a,r)=>{const v=s("v-toolbar"),p=s("v-text-field"),h=s("v-form"),y=s("v-col"),m=s("vxe-column"),k=s("vxe-table"),u=s("v-row"),E=s("v-card-text"),$=s("v-btn"),F=s("v-card-actions"),M=s("v-card"),U=s("v-dialog");return x(),W(U,{modelValue:e.showDialog,"onUpdate:modelValue":r[3]||(r[3]=i=>e.showDialog=i),width:"70%",transition:"dialog-top-transition",persistent:!0},{default:o(()=>[t(M,null,{default:o(()=>[t(v,{color:"white",title:`${a.$t("base.userManagement.userModalTitle")}`},null,8,["title"]),t(E,null,{default:o(()=>[t(u,null,{default:o(()=>[t(y,{cols:"3"},{default:o(()=>[D("div",{class:"searchForm",style:J({height:_(n)})},[t(w,{icon:"mdi-refresh",size:"x-small","tooltip-text":a.$t("system.page.reset"),onClick:l.resetForm},null,8,["tooltip-text","onClick"]),t(w,{icon:"mdi-magnify",size:"x-small","tooltip-text":a.$t("system.page.confirm"),onClick:l.sureSearch},null,8,["tooltip-text","onClick"]),t(h,{ref:"formRef",class:"mt-4"},{default:o(()=>[t(p,{modelValue:e.searchForm.user_num,"onUpdate:modelValue":r[0]||(r[0]=i=>e.searchForm.user_num=i),label:a.$t("base.userManagement.user_num"),variant:"outlined",density:"compact","hide-details":"",clearable:"",class:"mb-4"},null,8,["modelValue","label"]),t(p,{modelValue:e.searchForm.user_name,"onUpdate:modelValue":r[1]||(r[1]=i=>e.searchForm.user_name=i),label:a.$t("base.userManagement.user_name"),variant:"outlined",density:"compact","hide-details":"",clearable:"",class:"mb-4"},null,8,["modelValue","label"]),t(p,{modelValue:e.searchForm.user_role,"onUpdate:modelValue":r[2]||(r[2]=i=>e.searchForm.user_role=i),label:a.$t("base.userManagement.user_role"),variant:"outlined",density:"compact","hide-details":"",clearable:"",class:"mb-4"},null,8,["modelValue","label"])]),_:1},512)],4)]),_:1}),t(y,{cols:"9"},{default:o(()=>[D("div",ae,[t(k,{ref_key:"xTable",ref:d,"column-config":{minWidth:"100px"},data:e.tableData,height:_(G).SELECT_TABLE,align:"center"},{empty:o(()=>[b(c(_(C).global.t("system.page.noData")),1)]),default:o(()=>[t(m,{type:"seq",width:"60"}),t(m,{type:"checkbox",width:"50"}),t(m,{field:"user_num",title:a.$t("base.userManagement.user_num")},null,8,["title"]),t(m,{field:"user_name",title:a.$t("base.userManagement.user_name")},null,8,["title"]),t(m,{field:"user_role",title:a.$t("base.userManagement.user_role")},null,8,["title"]),t(m,{field:"sex",title:a.$t("base.userManagement.sex")},{default:o(({row:i})=>[D("span",null,c(a.$t(`system.combobox.sex.${i.sex}`)),1)]),_:1},8,["title"]),t(m,{field:"contact_tel",title:a.$t("base.userManagement.contact_tel")},null,8,["title"]),t(m,{field:"is_valid",title:a.$t("base.userManagement.is_valid")},{default:o(({row:i,column:z})=>[D("span",null,c(i[z.property]?a.$t("system.combobox.yesOrNo.yes"):a.$t("system.combobox.yesOrNo.no")),1)]),_:1},8,["title"])]),_:1},8,["data","height"]),t(B,{"current-page":e.tablePage.pageIndex,"page-size":e.tablePage.pageSize,perfect:"",total:e.tablePage.total,"page-sizes":_(j),layouts:_(N),onPageChange:l.handlePageChange},null,8,["current-page","page-size","total","page-sizes","layouts","onPageChange"])])]),_:1})]),_:1})]),_:1}),t(F,{class:"justify-end"},{default:o(()=>[t($,{variant:"text",onClick:l.closeDialog},{default:o(()=>[b(c(a.$t("system.page.close")),1)]),_:1},8,["onClick"]),t($,{color:"primary",variant:"text",onClick:l.submit},{default:o(()=>[b(c(a.$t("system.page.confirm")),1)]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}}});const oe=X(te,[["__scopeId","data-v-aa3337d7"]]),ge=V({__name:"confirm-unload",emits:["sure"],setup(I,{expose:P,emit:S}){const d=g(),e=f({showDialog:!1,unloadTime:"",unloadPerson:"",unloadPersonID:0}),l=f({handleSelectPerson:()=>{d.value.openDialog()},employeeSureBack:n=>{n.length>0&&(e.unloadPerson=n[0].user_name,e.unloadPersonID=n[0].id,d.value.closeDialog())},openDialog:()=>{e.unloadTime=A(new Date,"yyyy-MM-dd");const n=ee.getters["user/userInfo"];e.unloadPerson=n.user_name,e.unloadPersonID=n.user_id,e.showDialog=!0},closeDialog:()=>{e.showDialog=!1},submit:async()=>{e.unloadTime?S("sure",{unloadTime:e.unloadTime,unloadPerson:e.unloadPerson,unloadPersonID:e.unloadPersonID}):T.$message({type:"error",content:C.global.t("wms.stockAsnInfo.mustInputErrorMsg")})}});return P({openDialog:l.openDialog,closeDialog:l.closeDialog}),(n,a)=>{const r=s("v-toolbar"),v=s("v-text-field"),p=s("v-card-text"),h=s("v-btn"),y=s("v-card-actions"),m=s("v-card"),k=s("v-dialog");return x(),K(Q,null,[t(k,{modelValue:e.showDialog,"onUpdate:modelValue":a[2]||(a[2]=u=>e.showDialog=u),width:"50%",transition:"dialog-top-transition",persistent:!0},{default:o(()=>[t(m,{class:"formCard"},{default:o(()=>[t(r,{color:"white",title:`${n.$t("wms.stockAsnInfo.unloadTime")}`},null,8,["title"]),t(p,null,{default:o(()=>[t(v,{modelValue:e.unloadPerson,"onUpdate:modelValue":a[0]||(a[0]=u=>e.unloadPerson=u),variant:"outlined",label:n.$t("wms.stockAsnInfo.unloadPerson"),"append-inner-icon":"mdi-magnify","single-line":"",readonly:"","onClick:appendInner":l.handleSelectPerson},null,8,["modelValue","label","onClick:appendInner"]),t(v,{modelValue:e.unloadTime,"onUpdate:modelValue":a[1]||(a[1]=u=>e.unloadTime=u),type:"date",variant:"outlined",label:n.$t("wms.stockAsnInfo.unloadTime")},null,8,["modelValue","label"])]),_:1}),t(y,{class:"justify-end"},{default:o(()=>[t(h,{variant:"text",onClick:l.closeDialog},{default:o(()=>[b(c(n.$t("system.page.close")),1)]),_:1},8,["onClick"]),t(h,{color:"primary",variant:"text",onClick:l.submit},{default:o(()=>[b(c(n.$t("system.page.submit")),1)]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(oe,{ref_key:"EmployeeSelectRef",ref:d,onSureSelect:l.employeeSureBack},null,8,["onSureSelect"])],64)}}});export{ge as _};
