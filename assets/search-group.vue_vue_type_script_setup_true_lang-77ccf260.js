import{i as O,w as P}from"./i18n-0af8b262.js";import{c as L,b as R,e as T}from"./common-938b41ea.js";import{d as N,r as b,c as w,a as r,x as m,m as C,q as s,ap as d,ac as U,u as A,b as $,v as g,s as p,y as B,at as E,o as J,e as V,O as K,b0 as I}from"./runtime-core.esm-bundler-1bbee395.js";import{_ as M}from"./_plugin-vue_export-helper-c27b6911.js";import{a as j}from"./index-cd6d6b34.js";const q={class:"pickerContainer"},H={class:"handleClickBlock"},z=N({__name:"v-datetime-picker",props:{label:null,disabled:{type:Boolean},modelValue:null},emits:["update:modelValue"],setup(h,{emit:v}){const u=h,o=b({val1:"",readOnly:!0}),i=w({get:()=>u.modelValue,set:e=>{v("update:modelValue",e)}});return(e,n)=>{const t=r("v-text-field"),a=r("vxe-input");return m(),C("div",q,[s(t,{modelValue:d(i),"onUpdate:modelValue":n[0]||(n[0]=l=>U(i)?i.value=l:null),clearable:"","hide-details":"",density:"comfortable",class:"searchInput ml-5 mt-1",label:u.label,variant:"solo",readonly:o.readOnly,"persistent-clear":!u.disabled,disabled:u.disabled},null,8,["modelValue","label","readonly","persistent-clear","disabled"]),A("div",H,[s(a,{modelValue:d(i),"onUpdate:modelValue":n[1]||(n[1]=l=>U(i)?i.value=l:null),type:"datetime",transfer:""},null,8,["modelValue"])])])}}});const G=M(z,[["__scopeId","data-v-52d7d175"]]),D={asnStatistic:{default:["supplier_name","sku_name"],list:[{type:"string",name:"spu_code"},{type:"string",name:"spu_name"},{type:"string",name:"sku_code"},{type:"string",name:"supplier_name"},{type:"string",name:"sku_name"},{type:"string",name:"goods_owner_name"}]},deliveryStatistic:{default:["sku_code","warehouse_name","customer_name"],list:[{type:"string",name:"spu_code"},{type:"string",name:"spu_name"},{type:"string",name:"sku_code"},{type:"string",name:"sku_name"},{type:"string",name:"warehouse_name"},{type:"string",name:"customer_name"},{type:"datetime",name:"delivery_date_from"},{type:"datetime",name:"delivery_date_to"}]}},Q=N({__name:"set-search",props:{options:null,i18nKey:null},emits:["success"],setup(h,{expose:v,emit:u}){const o=h,i=$(),e=b({showDialog:!1,actions:[],searchList:[],menu_name:""}),n=b({openDialog:t=>{e.menu_name=t,e.searchList=D[e.menu_name].list.map(a=>({label:O.global.t(`${o.i18nKey}.${a.name}`),value:a.name})),e.actions=[...o.options],e.showDialog=!0},closeDialog:()=>{e.showDialog=!1},submit:()=>{if(e.actions.length>3||e.actions.length===0){j.$message({type:"error",content:`${O.global.t("system.tips.setSearchError")}`});return}let t=L("menu_search_setting");t?t[e.menu_name]=e.actions:t={[e.menu_name]:e.actions},R("menu_search_setting",t),u("success"),n.closeDialog()},selectAllEvent:({checked:t})=>{t?e.actions=e.searchList.map(a=>a.value):e.actions=[]},selectChangeEvent:()=>{const t=i.value.getCheckboxRecords();e.actions=t.map(a=>a.value)}});return v({openDialog:n.openDialog,closeDialog:n.closeDialog}),(t,a)=>{const l=r("v-toolbar"),_=r("vxe-column"),f=r("vxe-table"),S=r("v-card-text"),k=r("v-btn"),c=r("v-card-actions"),x=r("v-card"),y=r("v-dialog");return m(),g(y,{modelValue:e.showDialog,"onUpdate:modelValue":a[1]||(a[1]=F=>e.showDialog=F),width:"400px",transition:"dialog-top-transition",persistent:!0},{default:p(()=>[s(x,null,{default:p(()=>[s(l,{color:"white",title:`${t.$t("system.page.setSearch")}`},null,8,["title"]),s(S,null,{default:p(()=>[s(f,{ref_key:"xTable",ref:i,"checkbox-config":{checkRowKeys:e.actions},data:e.searchList,"radio-config":{labelField:"value"},"row-config":{isHover:!0,keyField:"value"},align:"center","row-id":"value","max-height":"500",onCheckboxAll:n.selectAllEvent,onCheckboxChange:n.selectChangeEvent},{default:p(()=>[s(_,{type:"checkbox",width:"60"}),s(_,{title:t.$t("base.roleMenu.modalTitle.actionTitle"),field:"label"},null,8,["title"])]),_:1},8,["checkbox-config","data","onCheckboxAll","onCheckboxChange"])]),_:1}),s(c,{class:"justify-end"},{default:p(()=>[s(k,{variant:"text",onClick:a[0]||(a[0]=F=>n.closeDialog())},{default:p(()=>[B(E(t.$t("system.page.close")),1)]),_:1}),s(k,{color:"primary",variant:"text",onClick:n.submit},{default:p(()=>[B(E(t.$t("system.page.submit")),1)]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}}}),te=N({__name:"search-group",props:{modelValue:null,menuName:null,i18nPrefix:null},emits:["sureSearch","update:modelValue"],setup(h,{expose:v,emit:u}){const o=h,i=$(),e=b({searchSetting:[],initForm:null}),n=b({sureSearch:()=>{u("sureSearch")},refreshSearchSetting:()=>{t.value=$(JSON.parse(JSON.stringify(e.initForm)));const l=T(o.menuName);l.length>0?e.searchSetting=l:e.searchSetting=D[o.menuName].default}});J(()=>{e.initForm=JSON.parse(JSON.stringify(o.modelValue)),n.refreshSearchSetting()});const t=w({get:()=>o.modelValue,set:l=>{u("update:modelValue",l)}}),a=w(()=>D[o.menuName].list.filter(_=>e.searchSetting.includes(_.name)));return v({openDialog:()=>{i.value.openDialog(o.menuName)}}),(l,_)=>{const f=r("v-col"),S=r("v-text-field"),k=r("v-row");return m(),C(K,null,[s(k,{"no-gutters":"",onKeyup:P(n.sureSearch,["enter"])},{default:p(()=>[[1].includes(d(a).length)?(m(),g(f,{key:0,cols:"4"})):V("",!0),[1,2].includes(d(a).length)?(m(),g(f,{key:1,cols:"4"})):V("",!0),(m(!0),C(K,null,I(d(a),(c,x)=>(m(),g(f,{key:x,cols:"4"},{default:p(()=>[c.type==="string"?(m(),g(S,{key:0,modelValue:d(t)[c.name],"onUpdate:modelValue":y=>d(t)[c.name]=y,clearable:"","hide-details":"",density:"comfortable",class:"searchInput ml-5 mt-1",label:l.$t(`${o.i18nPrefix}.${c.name}`),variant:"solo"},null,8,["modelValue","onUpdate:modelValue","label"])):c.type==="datetime"?(m(),g(G,{key:1,modelValue:d(t)[c.name],"onUpdate:modelValue":y=>d(t)[c.name]=y,label:l.$t(`${o.i18nPrefix}.${c.name}`)},null,8,["modelValue","onUpdate:modelValue","label"])):V("",!0)]),_:2},1024))),128))]),_:1},8,["onKeyup"]),s(Q,{ref_key:"SetSearchRef",ref:i,"i18n-key":o.i18nPrefix,options:e.searchSetting,onSuccess:_[0]||(_[0]=c=>n.refreshSearchSetting())},null,8,["i18n-key","options"])],64)}}});export{te as _};
