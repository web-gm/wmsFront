import{i as p,w as k}from"./i18n-0af8b262.js";import{a as M,b as T}from"./style-b9bc59b4.js";import{D as B,a as G,c as C,P as F,b as I}from"./system-93ae242b.js";import{a as V}from"./index-cd6d6b34.js";import{j as x}from"./deliveryManagement-7eebd823.js";import{_ as S}from"./tooltip-btn.vue_vue_type_script_setup_true_lang-fc6ce76f.js";import{G as y}from"./commodityManagement-a1debff9.js";import{g as E,s as z}from"./common-938b41ea.js";import{_ as q}from"./search-delivered-detail.vue_vue_type_script_setup_true_lang-20446111.js";import{e as L}from"./exportTable-b0d17537.js";import{B as A}from"./btnGroup-26ff2079.js";import{d as U,b as m,r as v,o as H,c as b,w as O,a as c,x as j,m as N,u,q as e,s,y as K,at as h,ap as n,as as R,O as W}from"./runtime-core.esm-bundler-1bbee395.js";import{_ as Z}from"./_plugin-vue_export-helper-c27b6911.js";import"./index-f4e4efab.js";import"./request-e1053d5a.js";import"./index-827f2091.js";import"./vue-router-1283ad2d.js";import"./index-ae8f073f.js";const Y={class:"operateArea"},J={style:{width:"100%",display:"flex","justify-content":"center"}},Q=U({__name:"tabGoodsToBePicked",setup(X,{expose:w}){const _=m(),t=v({showDeliveredDetailID:0,showDeliveredDetail:!1,dialogForm:{id:0},searchForm:{dispatch_no:"",customer_name:"",spu_name:""},timer:m(null),activeTab:null,tableData:m([]),tablePage:m({total:0,pageIndex:1,pageSize:B,searchObjects:[]}),btnList:[],authorityList:E()}),r=v({closeDeliveredDetail:()=>{t.showDeliveredDetail=!1},viewRow:a=>{t.showDeliveredDetailID=a.id,t.showDeliveredDetail=!0},refresh:()=>{r.getGoodsToBePicked()},getGoodsToBePicked:async()=>{const{data:a}=await x(t.tablePage);if(!a.isSuccess){V.$message({type:"error",content:a.errorMessage});return}t.tableData=a.data.rows,t.tablePage.total=a.data.totals},handlePageChange:m(({currentPage:a,pageSize:o})=>{t.tablePage.pageIndex=a,t.tablePage.pageSize=o,r.getGoodsToBePicked()}),exportTable:()=>{const a=_.value;L({table:a,filename:p.global.t("wms.deliveryManagement.goodsToBePicked"),columnFilterMethod({column:o}){return!["checkbox"].includes(o==null?void 0:o.type)&&!["operate"].includes(o==null?void 0:o.field)}})},sureSearch:()=>{t.tablePage.searchObjects=z(t.searchForm),r.getGoodsToBePicked()}});H(()=>{t.btnList=[{name:p.global.t("system.page.refresh"),icon:"mdi-refresh",code:"",click:r.refresh},{name:p.global.t("system.page.export"),icon:"mdi-export-variant",code:"picked-export",click:r.exportTable}]});const D=b(()=>M({})),P=b(()=>T({}));return O(()=>t.searchForm,()=>{t.timer&&clearTimeout(t.timer),t.timer=setTimeout(()=>{t.timer=null,r.sureSearch()},G)},{deep:!0}),w({getGoodsToBePicked:r.getGoodsToBePicked}),(a,o)=>{const d=c("v-col"),g=c("v-text-field"),f=c("v-row"),l=c("vxe-column"),$=c("vxe-table");return j(),N(W,null,[u("div",Y,[e(f,{"no-gutters":""},{default:s(()=>[e(d,{cols:"3",class:"col"},{default:s(()=>[e(A,{"authority-list":t.authorityList,"btn-list":t.btnList},null,8,["authority-list","btn-list"])]),_:1}),e(d,{cols:"9"},{default:s(()=>[e(f,{"no-gutters":"",onKeyup:k(r.sureSearch,["enter"])},{default:s(()=>[e(d,{cols:"4"},{default:s(()=>[e(g,{modelValue:t.searchForm.dispatch_no,"onUpdate:modelValue":o[0]||(o[0]=i=>t.searchForm.dispatch_no=i),clearable:"","hide-details":"",density:"comfortable",class:"searchInput ml-5 mt-1",label:a.$t("wms.deliveryManagement.dispatch_no"),variant:"solo"},null,8,["modelValue","label"])]),_:1}),e(d,{cols:"4"},{default:s(()=>[e(g,{modelValue:t.searchForm.customer_name,"onUpdate:modelValue":o[1]||(o[1]=i=>t.searchForm.customer_name=i),clearable:"","hide-details":"",density:"comfortable",class:"searchInput ml-5 mt-1",label:a.$t("wms.deliveryManagement.customer_name"),variant:"solo"},null,8,["modelValue","label"])]),_:1}),e(d,{cols:"4"},{default:s(()=>[e(g,{modelValue:t.searchForm.spu_name,"onUpdate:modelValue":o[2]||(o[2]=i=>t.searchForm.spu_name=i),clearable:"","hide-details":"",density:"comfortable",class:"searchInput ml-5 mt-1",label:a.$t("wms.deliveryManagement.spu_name"),variant:"solo"},null,8,["modelValue","label"])]),_:1})]),_:1},8,["onKeyup"])]),_:1})]),_:1})]),u("div",{class:"mt-5",style:R({height:n(D)})},[e($,{ref_key:"xTable",ref:_,"column-config":{minWidth:"100px"},data:t.tableData,height:n(P),align:"center"},{empty:s(()=>[K(h(n(p).global.t("system.page.noData")),1)]),default:s(()=>[e(l,{type:"seq",width:"60"}),e(l,{field:"dispatch_no",title:a.$t("wms.deliveryManagement.dispatch_no")},null,8,["title"]),e(l,{field:"spu_code",title:a.$t("wms.deliveryManagement.spu_code")},null,8,["title"]),e(l,{field:"spu_description",width:"200px",title:a.$t("wms.deliveryManagement.spu_description")},null,8,["title"]),e(l,{field:"spu_name",title:a.$t("wms.deliveryManagement.spu_name")},null,8,["title"]),e(l,{field:"sku_code",title:a.$t("wms.deliveryManagement.sku_code")},null,8,["title"]),e(l,{field:"bar_code",title:a.$t("wms.deliveryManagement.bar_code")},null,8,["title"]),e(l,{field:"qty",title:a.$t("wms.deliveryManagement.order_qty")},null,8,["title"]),e(l,{field:"unpicked_qty",title:a.$t("wms.deliveryManagement.unpicked_qty")},null,8,["title"]),e(l,{field:"picked_qty",title:a.$t("wms.deliveryManagement.picked_qty")},null,8,["title"]),e(l,{field:"weight",title:a.$t("wms.deliveryManagement.detailWeight")},{default:s(({row:i})=>[u("span",null,h(`${i.weight} ${n(y)("weight",i.weight_unit)}`),1)]),_:1},8,["title"]),e(l,{field:"volume",title:a.$t("wms.deliveryManagement.detailVolume")},{default:s(({row:i})=>[u("span",null,h(`${i.volume} ${n(y)("volume",i.volume_unit)}`),1)]),_:1},8,["title"]),e(l,{field:"customer_name",title:a.$t("wms.deliveryManagement.customer_name")},null,8,["title"]),e(l,{field:"creator",title:a.$t("wms.deliveryManagement.creator")},null,8,["title"]),e(l,{field:"create_time",width:"170px",formatter:["formatDate","yyyy-MM-dd HH:mm"],title:a.$t("wms.deliveryManagement.create_time")},null,8,["title"]),e(l,{field:"operate",title:a.$t("system.page.operate"),width:"120",resizable:!1,"show-overflow":""},{default:s(({row:i})=>[u("div",J,[e(S,{flat:!0,icon:"mdi-eye-outline","tooltip-text":a.$t("system.page.view"),onClick:ee=>r.viewRow(i)},null,8,["tooltip-text","onClick"])])]),_:1},8,["title"])]),_:1},8,["data","height"]),e(C,{"current-page":t.tablePage.pageIndex,"page-size":t.tablePage.pageSize,perfect:"",total:t.tablePage.total,"page-sizes":n(F),layouts:n(I),onPageChange:r.handlePageChange},null,8,["current-page","page-size","total","page-sizes","layouts","onPageChange"]),e(q,{id:t.showDeliveredDetailID,"show-dialog":t.showDeliveredDetail,onClose:r.closeDeliveredDetail},null,8,["id","show-dialog","onClose"])],4)],64)}}});const ve=Z(Q,[["__scopeId","data-v-e26b57a3"]]);export{ve as default};
