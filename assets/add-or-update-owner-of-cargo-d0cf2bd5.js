import{i as m}from"./i18n-0af8b262.js";import{a as f}from"./index-cd6d6b34.js";import{a as B,u as T}from"./ownerOfCargo-a67b46ea.js";import{S as l}from"./formRule-3feb276f.js";import{r as N}from"./common-938b41ea.js";import{d as R,b,c as w,r as y,w as h,a as s,x as j,v as F,s as n,q as a,y as V,at as C,ap as I,ac as q}from"./runtime-core.esm-bundler-1bbee395.js";import{_ as L}from"./_plugin-vue_export-helper-c27b6911.js";import"./request-e1053d5a.js";import"./index-f4e4efab.js";import"./index-827f2091.js";import"./vue-router-1283ad2d.js";import"./index-ae8f073f.js";const M=R({__name:"add-or-update-owner-of-cargo",props:{showDialog:{type:Boolean},form:null},emits:["close","saveSuccess"],setup(O,{emit:p}){const i=O,_=b(),u=w(()=>i.showDialog),$=w(()=>i.form.id&&i.form.id>0?"update":"add"),o=y({form:b({id:0,goods_owner_name:"",city:"",address:"",manager:"",contact_tel:""}),rules:{goods_owner_name:[e=>!!e||`${m.global.t("system.checkText.mustInput")}${m.global.t("base.ownerOfCargo.goods_owner_name")}!`,e=>l(e,0,256)===""||l(e,0,256)],city:[e=>l(e,0,128)===""||l(e,0,128)],address:[e=>l(e,0,256)===""||l(e,0,256)],manager:[e=>l(e,0,64)===""||l(e,0,64)],contact_tel:[e=>l(e,0,64)===""||l(e,0,64)]}}),g=y({closeDialog:()=>{p("close")},submit:async()=>{const{valid:e}=await _.value.validate();if(e){const t=N(o.form),{data:c}=$.value==="add"?await B(t):await T(t);if(!c.isSuccess){f.$message({type:"error",content:c.errorMessage});return}f.$message({type:"success",content:`${m.global.t("system.page.submit")}${m.global.t("system.tips.success")}`}),p("saveSuccess")}else f.$message({type:"error",content:m.global.t("system.checkText.checkFormFail")})}});return h(()=>u.value,e=>{e&&(o.form=i.form)}),(e,t)=>{const c=s("v-toolbar"),d=s("v-text-field"),k=s("v-form"),U=s("v-card-text"),v=s("v-btn"),x=s("v-card-actions"),S=s("v-card"),D=s("v-dialog");return j(),F(D,{modelValue:I(u),"onUpdate:modelValue":t[5]||(t[5]=r=>q(u)?u.value=r:null),width:"30%",transition:"dialog-top-transition",persistent:!0},{default:n(()=>[a(S,null,{default:n(()=>[a(c,{color:"white",title:`${e.$t("router.sideBar.ownerOfCargo")}`},null,8,["title"]),a(U,null,{default:n(()=>[a(k,{ref_key:"formRef",ref:_},{default:n(()=>[a(d,{modelValue:o.form.goods_owner_name,"onUpdate:modelValue":t[0]||(t[0]=r=>o.form.goods_owner_name=r),label:e.$t("base.ownerOfCargo.goods_owner_name"),rules:o.rules.goods_owner_name,variant:"outlined"},null,8,["modelValue","label","rules"]),a(d,{modelValue:o.form.city,"onUpdate:modelValue":t[1]||(t[1]=r=>o.form.city=r),label:e.$t("base.ownerOfCargo.city"),rules:o.rules.city,variant:"outlined"},null,8,["modelValue","label","rules"]),a(d,{modelValue:o.form.address,"onUpdate:modelValue":t[2]||(t[2]=r=>o.form.address=r),label:e.$t("base.ownerOfCargo.address"),rules:o.rules.address,variant:"outlined"},null,8,["modelValue","label","rules"]),a(d,{modelValue:o.form.manager,"onUpdate:modelValue":t[3]||(t[3]=r=>o.form.manager=r),label:e.$t("base.ownerOfCargo.manager"),rules:o.rules.manager,variant:"outlined"},null,8,["modelValue","label","rules"]),a(d,{modelValue:o.form.contact_tel,"onUpdate:modelValue":t[4]||(t[4]=r=>o.form.contact_tel=r),label:e.$t("base.ownerOfCargo.contact_tel"),rules:o.rules.contact_tel,variant:"outlined"},null,8,["modelValue","label","rules"])]),_:1},512)]),_:1}),a(x,{class:"justify-end"},{default:n(()=>[a(v,{variant:"text",onClick:g.closeDialog},{default:n(()=>[V(C(e.$t("system.page.close")),1)]),_:1},8,["onClick"]),a(v,{color:"primary",variant:"text",onClick:g.submit},{default:n(()=>[V(C(e.$t("system.page.submit")),1)]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}}});const Z=L(M,[["__scopeId","data-v-8d26705d"]]);export{Z as default};
