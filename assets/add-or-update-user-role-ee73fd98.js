import{i as n}from"./i18n-0af8b262.js";import{a as c}from"./index-cd6d6b34.js";import{a as B,u as T}from"./userRoleSetting-2c2fc537.js";import{S as v}from"./formRule-3feb276f.js";import{r as N}from"./common-938b41ea.js";import{d as O,b as g,c as b,r as y,w as j,a as t,x as F,v as I,s as l,q as a,y as w,at as $,ap as q,ac as L}from"./runtime-core.esm-bundler-1bbee395.js";import{_ as M}from"./_plugin-vue_export-helper-c27b6911.js";import"./request-e1053d5a.js";import"./index-f4e4efab.js";import"./index-827f2091.js";import"./vue-router-1283ad2d.js";import"./index-ae8f073f.js";const z=O({__name:"add-or-update-user-role",props:{showDialog:{type:Boolean},form:null},emits:["close","saveSuccess"],setup(k,{emit:u}){const i=k,_=g(),m=b(()=>i.showDialog),S=b(()=>i.form.id&&i.form.id>0?"update":"add"),s=y({form:g({id:0,role_name:"",is_valid:!0}),rules:{role_name:[e=>!!e||`${n.global.t("system.checkText.mustInput")}${n.global.t("base.userRoleSetting.role_name")}!`,e=>v(e,0,32)===""||v(e,0,32)],is_valid:[]}}),p=y({closeDialog:()=>{u("close")},submit:async()=>{const{valid:e}=await _.value.validate();if(e){const o=N(s.form),{data:d}=S.value==="add"?await B(o):await T(o);if(!d.isSuccess){c.$message({type:"error",content:d.errorMessage});return}c.$message({type:"success",content:`${n.global.t("system.page.submit")}${n.global.t("system.tips.success")}`}),u("saveSuccess")}else c.$message({type:"error",content:n.global.t("system.checkText.checkFormFail")})}});return j(()=>m.value,e=>{e&&(s.form=i.form)}),(e,o)=>{const d=t("v-toolbar"),V=t("v-text-field"),h=t("v-switch"),x=t("v-form"),R=t("v-card-text"),f=t("v-btn"),C=t("v-card-actions"),U=t("v-card"),D=t("v-dialog");return F(),I(D,{modelValue:q(m),"onUpdate:modelValue":o[2]||(o[2]=r=>L(m)?m.value=r:null),width:"30%",transition:"dialog-top-transition",persistent:!0},{default:l(()=>[a(U,null,{default:l(()=>[a(d,{color:"white",title:`${e.$t("router.sideBar.userRoleSetting")}`},null,8,["title"]),a(R,null,{default:l(()=>[a(x,{ref_key:"formRef",ref:_},{default:l(()=>[a(V,{modelValue:s.form.role_name,"onUpdate:modelValue":o[0]||(o[0]=r=>s.form.role_name=r),label:e.$t("base.userRoleSetting.role_name"),rules:s.rules.role_name,variant:"outlined"},null,8,["modelValue","label","rules"]),a(h,{modelValue:s.form.is_valid,"onUpdate:modelValue":o[1]||(o[1]=r=>s.form.is_valid=r),color:"primary",label:e.$t("base.userRoleSetting.is_valid"),rules:s.rules.is_valid},null,8,["modelValue","label","rules"])]),_:1},512)]),_:1}),a(C,{class:"justify-end"},{default:l(()=>[a(f,{variant:"text",onClick:p.closeDialog},{default:l(()=>[w($(e.$t("system.page.close")),1)]),_:1},8,["onClick"]),a(f,{color:"primary",variant:"text",onClick:p.submit},{default:l(()=>[w($(e.$t("system.page.submit")),1)]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}}});const ee=M(z,[["__scopeId","data-v-4407dfc9"]]);export{ee as default};
