import{i}from"./i18n-0af8b262.js";import{a as p}from"./index-cd6d6b34.js";import{a as B,u as T}from"./supplier-8eff24fc.js";import{r as N}from"./common-938b41ea.js";import{d as O,b,c as g,r as y,w as R,a as s,x as j,v as F,s as r,q as o,y as V,at as $,ap as I,ac as q}from"./runtime-core.esm-bundler-1bbee395.js";import{_ as M}from"./_plugin-vue_export-helper-c27b6911.js";import"./request-e1053d5a.js";import"./index-f4e4efab.js";import"./index-827f2091.js";import"./vue-router-1283ad2d.js";import"./index-ae8f073f.js";const z=O({__name:"add-or-update-supplier",props:{showDialog:{type:Boolean},form:null},emits:["close","saveSuccess"],setup(k,{emit:c}){const u=k,f=b(),m=g(()=>u.showDialog),w=g(()=>u.form.id&&u.form.id>0?"update":"add"),e=y({form:b({id:0,supplier_name:"",city:"",address:"",manager:"",email:"",contact_tel:"",is_valid:!0}),rules:{supplier_name:[a=>!!a||`${i.global.t("system.checkText.mustInput")}${i.global.t("base.supplier.supplier_name")}!`],city:[],address:[],manager:[],email:[],contact_tel:[],is_valid:[]}}),_=y({closeDialog:()=>{c("close")},submit:async()=>{const{valid:a}=await f.value.validate();if(a){const l=N(e.form),{data:d}=w.value==="add"?await B(l):await T(l);if(!d.isSuccess){p.$message({type:"error",content:d.errorMessage});return}p.$message({type:"success",content:`${i.global.t("system.page.submit")}${i.global.t("system.tips.success")}`}),c("saveSuccess")}else p.$message({type:"error",content:i.global.t("system.checkText.checkFormFail")})}});return R(()=>m.value,a=>{a&&(e.form=u.form)}),(a,l)=>{const d=s("v-toolbar"),n=s("v-text-field"),U=s("v-form"),C=s("v-card-text"),v=s("v-btn"),S=s("v-card-actions"),x=s("v-card"),D=s("v-dialog");return j(),F(D,{modelValue:I(m),"onUpdate:modelValue":l[6]||(l[6]=t=>q(m)?m.value=t:null),width:"30%",transition:"dialog-top-transition",persistent:!0},{default:r(()=>[o(x,null,{default:r(()=>[o(d,{color:"white",title:`${a.$t("router.sideBar.supplier")}`},null,8,["title"]),o(C,null,{default:r(()=>[o(U,{ref_key:"formRef",ref:f},{default:r(()=>[o(n,{modelValue:e.form.supplier_name,"onUpdate:modelValue":l[0]||(l[0]=t=>e.form.supplier_name=t),label:a.$t("base.supplier.supplier_name"),rules:e.rules.supplier_name,variant:"outlined"},null,8,["modelValue","label","rules"]),o(n,{modelValue:e.form.city,"onUpdate:modelValue":l[1]||(l[1]=t=>e.form.city=t),label:a.$t("base.supplier.city"),rules:e.rules.city,variant:"outlined"},null,8,["modelValue","label","rules"]),o(n,{modelValue:e.form.email,"onUpdate:modelValue":l[2]||(l[2]=t=>e.form.email=t),label:a.$t("base.supplier.email"),rules:e.rules.email,variant:"outlined"},null,8,["modelValue","label","rules"]),o(n,{modelValue:e.form.address,"onUpdate:modelValue":l[3]||(l[3]=t=>e.form.address=t),label:a.$t("base.supplier.address"),rules:e.rules.address,variant:"outlined"},null,8,["modelValue","label","rules"]),o(n,{modelValue:e.form.manager,"onUpdate:modelValue":l[4]||(l[4]=t=>e.form.manager=t),label:a.$t("base.supplier.manager"),rules:e.rules.manager,variant:"outlined"},null,8,["modelValue","label","rules"]),o(n,{modelValue:e.form.contact_tel,"onUpdate:modelValue":l[5]||(l[5]=t=>e.form.contact_tel=t),label:a.$t("base.supplier.contact_tel"),rules:e.rules.contact_tel,variant:"outlined"},null,8,["modelValue","label","rules"])]),_:1},512)]),_:1}),o(S,{class:"justify-end"},{default:r(()=>[o(v,{variant:"text",onClick:_.closeDialog},{default:r(()=>[V($(a.$t("system.page.close")),1)]),_:1},8,["onClick"]),o(v,{color:"primary",variant:"text",onClick:_.submit},{default:r(()=>[V($(a.$t("system.page.submit")),1)]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}}});const Y=M(z,[["__scopeId","data-v-96dbcc82"]]);export{Y as default};
