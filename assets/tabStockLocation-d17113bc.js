import{i as u,w as v}from"./i18n-0af8b262.js";import{a as P,b as I}from"./style-b9bc59b4.js";import{D as x,a as D,c as C,P as $,b as T}from"./system-93ae242b.js";import{a as q}from"./index-cd6d6b34.js";import{g as z,s as E}from"./common-938b41ea.js";import{b as F}from"./stockManagement-a6372198.js";import A from"./sku-info-b4018d4c.js";import{e as B}from"./exportTable-b0d17537.js";import{B as M}from"./btnGroup-26ff2079.js";import{d as O,b as c,r as p,o as V,c as f,w as G,a as r,x as H,m as N,u as g,q as e,s as i,y as U,at as k,ap as m,aq as j,as as K,O as Z}from"./runtime-core.esm-bundler-1bbee395.js";import{_ as W}from"./_plugin-vue_export-helper-c27b6911.js";import"./index-f4e4efab.js";import"./index-ae8f073f.js";import"./vue-router-1283ad2d.js";import"./request-e1053d5a.js";import"./index-827f2091.js";import"./stockAsn-18b92b84.js";import"./tooltip-btn.vue_vue_type_script_setup_true_lang-fc6ce76f.js";const Y={class:"operateArea"},J=["onClick"],Q=O({__name:"tabStockLocation",setup(R,{expose:b}){const _=c(),t=p({sku_id:0,showDialog:!1,showDialogShowInfo:!1,searchForm:{location_name:""},activeTab:null,tableData:c([]),tablePage:p({total:0,pageIndex:1,pageSize:x,searchObjects:c([])}),timer:c(null),btnList:[],authorityList:z()}),s=p({closeDialogShowInfo:()=>{t.showDialogShowInfo=!1},showSkuInfo(o){t.sku_id=o.sku_id,t.showDialogShowInfo=!0},refresh:()=>{s.getStockLocationList()},getStockLocationList:async()=>{const{data:o}=await F(t.tablePage);if(!o.isSuccess){q.$message({type:"error",content:o.errorMessage});return}t.tableData=o.data.rows,t.tablePage.total=o.data.totals},handlePageChange:c(({currentPage:o,pageSize:l})=>{t.tablePage.pageIndex=o,t.tablePage.pageSize=l,s.getStockLocationList()}),exportTable:()=>{const o=_.value;B({table:o,filename:u.global.t("wms.stockManagement.stockLocation"),columnFilterMethod({column:l}){return!["checkbox"].includes(l==null?void 0:l.type)&&!["operate"].includes(l==null?void 0:l.field)}})},sureSearch:()=>{t.tablePage.searchObjects=E(t.searchForm),s.getStockLocationList()}});V(()=>{t.btnList=[{name:u.global.t("system.page.refresh"),icon:"mdi-refresh",code:"",click:s.refresh},{name:u.global.t("system.page.export"),icon:"mdi-export-variant",code:"stock-export",click:s.exportTable}]});const w=f(()=>P({})),L=f(()=>I({}));return b({getStockLocationList:s.getStockLocationList}),G(()=>t.searchForm,()=>{t.timer&&clearTimeout(t.timer),t.timer=setTimeout(()=>{t.timer=null,s.sureSearch()},D)},{deep:!0}),(o,l)=>{const n=r("v-col"),y=r("v-text-field"),h=r("v-row"),a=r("vxe-column"),S=r("vxe-table");return H(),N(Z,null,[g("div",Y,[e(h,{"no-gutters":""},{default:i(()=>[e(n,{cols:"3",class:"col"},{default:i(()=>[e(M,{"authority-list":t.authorityList,"btn-list":t.btnList},null,8,["authority-list","btn-list"])]),_:1}),e(n,{cols:"9"},{default:i(()=>[e(h,{"no-gutters":"",onKeyup:v(s.sureSearch,["enter"])},{default:i(()=>[e(n,{cols:"4"}),e(n,{cols:"4"}),e(n,{cols:"4"},{default:i(()=>[e(y,{modelValue:t.searchForm.location_name,"onUpdate:modelValue":l[0]||(l[0]=d=>t.searchForm.location_name=d),clearable:"","hide-details":"",density:"comfortable",class:"searchInput ml-5 mt-1",label:o.$t("wms.stockLocation.location_name"),variant:"solo"},null,8,["modelValue","label"])]),_:1})]),_:1},8,["onKeyup"])]),_:1})]),_:1})]),g("div",{class:"mt-5",style:K({height:m(w)})},[e(S,{ref_key:"xTableStockLocation",ref:_,"column-config":{minWidth:"100px"},data:t.tableData,height:m(L),align:"center"},{empty:i(()=>[U(k(m(u).global.t("system.page.noData")),1)]),default:i(()=>[e(a,{type:"seq",width:"60"}),e(a,{type:"checkbox",width:"50"}),e(a,{field:"warehouse_name",title:o.$t("wms.stockLocation.warehouse_name")},null,8,["title"]),e(a,{field:"location_name",title:o.$t("wms.stockLocation.location_name")},null,8,["title"]),e(a,{field:"spu_code",title:o.$t("wms.stockLocation.spu_code")},{default:i(({row:d})=>[g("div",{class:j("text-decoration-none"),onClick:X=>s.showSkuInfo(d)},k(d.sku_code),9,J)]),_:1},8,["title"]),e(a,{field:"spu_name",title:o.$t("wms.stockLocation.spu_name")},null,8,["title"]),e(a,{field:"sku_code",title:o.$t("wms.stockLocation.sku_code")},null,8,["title"]),e(a,{field:"sku_name",title:o.$t("wms.stockLocation.sku_name")},null,8,["title"]),e(a,{field:"series_number",title:o.$t("wms.stockLocation.series_number")},null,8,["title"]),e(a,{field:"qty",title:o.$t("wms.stockLocation.qty")},null,8,["title"]),e(a,{field:"qty_available",title:o.$t("wms.stockLocation.qty_available")},null,8,["title"]),e(a,{field:"qty_locked",title:o.$t("wms.stockLocation.qty_locked")},null,8,["title"]),e(a,{field:"qty_frozen",title:o.$t("wms.stockLocation.qty_frozen")},null,8,["title"])]),_:1},8,["data","height"]),e(C,{"current-page":t.tablePage.pageIndex,"page-size":t.tablePage.pageSize,perfect:"",total:t.tablePage.total,"page-sizes":m($),layouts:m(T),onPageChange:s.handlePageChange},null,8,["current-page","page-size","total","page-sizes","layouts","onPageChange"])],4),e(A,{"show-dialog":t.showDialogShowInfo,sku_id:t.sku_id,onClose:s.closeDialogShowInfo},null,8,["show-dialog","sku_id","onClose"])],64)}}});const kt=W(Q,[["__scopeId","data-v-e90d953c"]]);export{kt as default};
