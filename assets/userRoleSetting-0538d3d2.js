import{a as R,b as C,e as k}from"./style-b9bc59b4.js";import{_}from"./tooltip-btn.vue_vue_type_script_setup_true_lang-fc6ce76f.js";import{g as L,d as T}from"./userRoleSetting-2c2fc537.js";import{a as d}from"./index-cd6d6b34.js";import N from"./add-or-update-user-role-ee73fd98.js";import{i as l}from"./i18n-0af8b262.js";import{e as B}from"./exportTable-b0d17537.js";import{B as M}from"./btnGroup-26ff2079.js";import{g as U}from"./common-938b41ea.js";import{d as F,b as O,r as h,o as H,c as b,a as r,x as A,m as V,u as m,q as o,s as i,as as q,ap as p,y as z,at as y}from"./runtime-core.esm-bundler-1bbee395.js";import{_ as J}from"./_plugin-vue_export-helper-c27b6911.js";import"./index-f4e4efab.js";import"./request-e1053d5a.js";import"./index-827f2091.js";import"./vue-router-1283ad2d.js";import"./formRule-3feb276f.js";import"./index-ae8f073f.js";const E={class:"container"},G={class:"operateArea"},I=F({__name:"userRoleSetting",setup(P){const g=O(),t=h({tableData:[],showDialog:!1,dialogForm:{id:0,role_name:"",is_valid:!0},btnList:[],authorityList:U()}),s=h({sureSearch:()=>{},getUserRoleList:async()=>{const{data:e}=await L();if(!e.isSuccess){d.$message({type:"error",content:e.errorMessage});return}t.tableData=e.data},add:()=>{t.dialogForm={id:0,role_name:"",is_valid:!0},t.showDialog=!0},closeDialog:()=>{t.showDialog=!1},saveSuccess:()=>{s.refresh(),s.closeDialog()},refresh:()=>{s.getUserRoleList()},editRow(e){t.dialogForm=JSON.parse(JSON.stringify(e)),t.showDialog=!0},deleteRow(e){d.$dialog({content:l.global.t("system.tips.beforeDeleteMessage"),handleConfirm:async()=>{if(e.id){const{data:a}=await T(e.id);if(!a.isSuccess){d.$message({type:"error",content:a.errorMessage});return}d.$message({type:"success",content:`${l.global.t("system.page.delete")}${l.global.t("system.tips.success")}`}),s.refresh()}}})},exportTable:()=>{const e=g.value;B({table:e,filename:l.global.t("router.sideBar.userRoleSetting"),columnFilterMethod({column:a}){return!["checkbox"].includes(a==null?void 0:a.type)&&!["operate"].includes(a==null?void 0:a.field)}})}});H(async()=>{await s.getUserRoleList(),t.btnList=[{name:l.global.t("system.page.add"),icon:"mdi-plus",code:"save",click:s.add},{name:l.global.t("system.page.refresh"),icon:"mdi-refresh",code:"",click:s.refresh},{name:l.global.t("system.page.export"),icon:"mdi-export-variant",code:"export",click:s.exportTable}]});const v=b(()=>R({hasTab:!1})),x=b(()=>C({hasTab:!1,hasPager:!1}));return(e,a)=>{const f=r("v-col"),w=r("v-row"),n=r("vxe-column"),S=r("vxe-table"),$=r("v-card-text"),D=r("v-card");return A(),V("div",E,[m("div",null,[o(D,{class:"mt-5"},{default:i(()=>[o($,null,{default:i(()=>[m("div",G,[o(w,{"no-gutters":""},{default:i(()=>[o(f,{cols:"12",sm:"4",class:"col"},{default:i(()=>[o(M,{"authority-list":t.authorityList,"btn-list":t.btnList},null,8,["authority-list","btn-list"])]),_:1}),o(f,{cols:"12",sm:"8"})]),_:1})]),m("div",{class:"mt-5",style:q({height:p(v)})},[o(S,{ref_key:"xTable",ref:g,data:t.tableData,height:p(x),align:"center"},{empty:i(()=>[z(y(p(l).global.t("system.page.noData")),1)]),default:i(()=>[o(n,{type:"seq",width:"60"}),o(n,{field:"role_name",title:e.$t("base.userRoleSetting.role_name")},null,8,["title"]),o(n,{field:"is_valid",title:e.$t("base.userRoleSetting.is_valid")},{default:i(({row:c,column:u})=>[m("span",null,y(c[u.property]?e.$t("system.combobox.yesOrNo.yes"):e.$t("system.combobox.yesOrNo.no")),1)]),_:1},8,["title"]),o(n,{field:"operate",title:e.$t("system.page.operate"),width:"160",resizable:!1,"show-overflow":""},{default:i(({row:c})=>[o(_,{flat:!0,icon:"mdi-pencil-outline","tooltip-text":e.$t("system.page.edit"),disabled:!t.authorityList.includes("save"),onClick:u=>s.editRow(c)},null,8,["tooltip-text","disabled","onClick"]),o(_,{flat:!0,icon:"mdi-delete-outline","tooltip-text":e.$t("system.page.delete"),"icon-color":t.authorityList.includes("delete")?p(k):"",disabled:!t.authorityList.includes("delete"),onClick:u=>s.deleteRow(c)},null,8,["tooltip-text","icon-color","disabled","onClick"])]),_:1},8,["title"])]),_:1},8,["data","height"])],4)]),_:1})]),_:1})]),o(N,{"show-dialog":t.showDialog,form:t.dialogForm,onClose:s.closeDialog,onSaveSuccess:s.saveSuccess},null,8,["show-dialog","form","onClose","onSaveSuccess"])])}}});const de=J(I,[["__scopeId","data-v-7d999fc3"]]);export{de as default};
