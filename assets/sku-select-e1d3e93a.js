import{a as L}from"./index-cd6d6b34.js";import{g as I}from"./stockManagement-a6372198.js";import{_ as y}from"./tooltip-btn.vue_vue_type_script_setup_true_lang-fc6ce76f.js";import{D as A,a as B,c as O,P as U,b as j}from"./system-93ae242b.js";import{c as G,S as H}from"./style-b9bc59b4.js";import{s as N}from"./common-938b41ea.js";import{i as R}from"./i18n-0af8b262.js";import{d as q,b as d,c as k,r as u,w as S,a as o,x as Y,v as Z,s as l,q as t,u as C,as as W,ap as c,y as p,at as _,ac as J}from"./runtime-core.esm-bundler-1bbee395.js";import{_ as K}from"./_plugin-vue_export-helper-c27b6911.js";const Q={class:"dataTable"},X=q({__name:"sku-select",props:{showDialog:{type:Boolean}},emits:["close","sureSelect"],setup(P,{emit:g}){const $=P,f=d(),m=k(()=>$.showDialog),a=u({tableData:[],tablePage:u({total:0,pageIndex:1,pageSize:A,searchObjects:d([])}),searchForm:{location_name:"",spu_name:"",sku_code:""},timer:d(null)}),s=u({handlePageChange:d(({currentPage:e,pageSize:n})=>{a.tablePage.pageIndex=e,a.tablePage.pageSize=n,s.getList()}),sureSearch:()=>{a.tablePage.searchObjects=N(a.searchForm),s.getList()},getList:async()=>{const{data:e}=await I(a.tablePage);if(!e.isSuccess){L.$message({type:"error",content:e.errorMessage});return}a.tableData=e.data.rows,a.tablePage.total=e.data.totals},resetForm:()=>{for(const e in a.searchForm){const n=e;a.searchForm[n]=""}a.tablePage.searchObjects=[]},submit:()=>{const e=f.value.getCheckboxRecords();g("sureSelect",e),s.closeDialog()},closeDialog:()=>{g("close")}}),x=k(()=>G({}));return S(()=>m.value,e=>{e&&s.getList()}),S(()=>a.searchForm,()=>{a.timer&&clearTimeout(a.timer),a.timer=setTimeout(()=>{a.timer=null,s.sureSearch()},B)},{deep:!0}),(e,n)=>{const w=o("v-toolbar"),b=o("v-text-field"),E=o("v-form"),h=o("v-col"),i=o("vxe-column"),F=o("vxe-table"),M=o("v-row"),T=o("v-card-text"),v=o("v-btn"),D=o("v-card-actions"),V=o("v-card"),z=o("v-dialog");return Y(),Z(z,{modelValue:c(m),"onUpdate:modelValue":n[2]||(n[2]=r=>J(m)?m.value=r:null),width:"70%",transition:"dialog-top-transition",persistent:!0},{default:l(()=>[t(V,null,{default:l(()=>[t(w,{color:"white",title:`${e.$t("wms.stock.skuSelectModal")}`},null,8,["title"]),t(T,null,{default:l(()=>[t(M,null,{default:l(()=>[t(h,{cols:"3"},{default:l(()=>[C("div",{class:"searchForm",style:W({height:c(x)})},[t(y,{icon:"mdi-refresh",size:"x-small","tooltip-text":e.$t("system.page.reset"),onClick:s.resetForm},null,8,["tooltip-text","onClick"]),t(y,{icon:"mdi-magnify",size:"x-small","tooltip-text":e.$t("system.page.confirm"),onClick:s.sureSearch},null,8,["tooltip-text","onClick"]),t(E,{ref:"formRef",class:"mt-4"},{default:l(()=>[t(b,{modelValue:a.searchForm.spu_name,"onUpdate:modelValue":n[0]||(n[0]=r=>a.searchForm.spu_name=r),label:e.$t("base.commodityManagement.spu_name"),variant:"outlined",density:"compact","hide-details":"",clearable:"",class:"mb-4"},null,8,["modelValue","label"]),t(b,{modelValue:a.searchForm.sku_code,"onUpdate:modelValue":n[1]||(n[1]=r=>a.searchForm.sku_code=r),label:e.$t("base.commodityManagement.sku_code"),variant:"outlined",density:"compact","hide-details":"",clearable:"",class:"mb-4"},null,8,["modelValue","label"])]),_:1},512)],4)]),_:1}),t(h,{cols:"9"},{default:l(()=>[C("div",Q,[t(F,{ref_key:"xTable",ref:f,"column-config":{minWidth:"100px"},data:a.tableData,height:c(H).SELECT_TABLE,align:"center"},{empty:l(()=>[p(_(c(R).global.t("system.page.noData")),1)]),default:l(()=>[t(i,{type:"seq",width:"60"}),t(i,{type:"checkbox",width:"50"}),t(i,{field:"spu_code",title:e.$t("base.commodityManagement.spu_code")},null,8,["title"]),t(i,{field:"spu_name",title:e.$t("base.commodityManagement.spu_name")},null,8,["title"]),t(i,{field:"sku_code",title:e.$t("base.commodityManagement.sku_code")},null,8,["title"]),t(i,{field:"sku_name",title:e.$t("base.commodityManagement.sku_name")},null,8,["title"]),t(i,{field:"supplier_name",title:e.$t("base.commodityManagement.supplier_name")},null,8,["title"]),t(i,{field:"brand",title:e.$t("base.commodityManagement.brand")},null,8,["title"]),t(i,{field:"origin",title:e.$t("base.commodityManagement.origin")},null,8,["title"]),t(i,{field:"unit",title:e.$t("base.commodityManagement.unit")},null,8,["title"])]),_:1},8,["data","height"]),t(O,{"current-page":a.tablePage.pageIndex,"page-size":a.tablePage.pageSize,perfect:"",total:a.tablePage.total,"page-sizes":c(U),layouts:c(j),onPageChange:s.handlePageChange},null,8,["current-page","page-size","total","page-sizes","layouts","onPageChange"])])]),_:1})]),_:1})]),_:1}),t(D,{class:"justify-end"},{default:l(()=>[t(v,{variant:"text",onClick:s.closeDialog},{default:l(()=>[p(_(e.$t("system.page.close")),1)]),_:1},8,["onClick"]),t(v,{color:"primary",variant:"text",onClick:s.submit},{default:l(()=>[p(_(e.$t("system.page.confirm")),1)]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}}});const re=K(X,[["__scopeId","data-v-dfbd635f"]]);export{re as s};
