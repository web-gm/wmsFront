import{i as m}from"./i18n-0af8b262.js";import{a as f}from"./index-cd6d6b34.js";import{a as S,u as B}from"./customer-7e6fccb3.js";import{h as O}from"./hiprintFast-e8811561.js";import{r as T}from"./common-938b41ea.js";import{d as N,b as _,c as $,r as k,w as j,a as r,x as F,v as I,s,q as a,y as v,at as b,ap as q,ac as M}from"./runtime-core.esm-bundler-1bbee395.js";import{_ as z}from"./_plugin-vue_export-helper-c27b6911.js";import"./request-e1053d5a.js";import"./index-f4e4efab.js";import"./index-827f2091.js";import"./vue-router-1283ad2d.js";import"./printSolution-f5a888b7.js";import"./index-ae8f073f.js";const A=N({__name:"add-or-update-customer",props:{showDialog:{type:Boolean},form:null},emits:["close","saveSuccess"],setup(C,{emit:g}){const u=C,y=_(),V=_(),i=$(()=>u.showDialog),w=$(()=>u.form.id&&u.form.id>0?"update":"add"),e=k({form:_({id:0,customer_name:"",city:"",address:"",manager:"",email:"",contact_tel:"",is_valid:!0}),rules:{customer_name:[t=>!!t||`${m.global.t("system.checkText.mustInput")}${m.global.t("base.customer.customer_name")}!`],city:[],address:[],manager:[],email:[],contact_tel:[],is_valid:[]}}),c=k({closeDialog:()=>{g("close")},submit:async()=>{const{valid:t}=await y.value.validate();if(t){const o=T(e.form),{data:d}=w.value==="add"?await S(o):await B(o);if(!d.isSuccess){f.$message({type:"error",content:d.errorMessage});return}f.$message({type:"success",content:`${m.global.t("system.page.submit")}${m.global.t("system.tips.success")}`}),g("saveSuccess")}else f.$message({type:"error",content:m.global.t("system.checkText.checkFormFail")})},print(){V.value.method.handleOpen()}});return j(()=>i.value,t=>{t&&(e.form=u.form)}),(t,o)=>{const d=r("v-toolbar"),n=r("v-text-field"),D=r("v-form"),U=r("v-card-text"),p=r("v-btn"),x=r("v-card-actions"),h=r("v-card"),R=r("v-dialog");return F(),I(R,{modelValue:q(i),"onUpdate:modelValue":o[6]||(o[6]=l=>M(i)?i.value=l:null),width:"30%",transition:"dialog-top-transition",persistent:!0},{default:s(()=>[a(h,null,{default:s(()=>[a(d,{color:"white",title:`${t.$t("router.sideBar.customer")}`},null,8,["title"]),a(U,null,{default:s(()=>[a(D,{ref_key:"formRef",ref:y},{default:s(()=>[a(n,{modelValue:e.form.customer_name,"onUpdate:modelValue":o[0]||(o[0]=l=>e.form.customer_name=l),label:t.$t("base.customer.customer_name"),rules:e.rules.customer_name,variant:"outlined"},null,8,["modelValue","label","rules"]),a(n,{modelValue:e.form.city,"onUpdate:modelValue":o[1]||(o[1]=l=>e.form.city=l),label:t.$t("base.customer.city"),rules:e.rules.city,variant:"outlined"},null,8,["modelValue","label","rules"]),a(n,{modelValue:e.form.email,"onUpdate:modelValue":o[2]||(o[2]=l=>e.form.email=l),label:t.$t("base.customer.email"),rules:e.rules.email,variant:"outlined"},null,8,["modelValue","label","rules"]),a(n,{modelValue:e.form.address,"onUpdate:modelValue":o[3]||(o[3]=l=>e.form.address=l),label:t.$t("base.customer.address"),rules:e.rules.address,variant:"outlined"},null,8,["modelValue","label","rules"]),a(n,{modelValue:e.form.manager,"onUpdate:modelValue":o[4]||(o[4]=l=>e.form.manager=l),label:t.$t("base.customer.manager"),rules:e.rules.manager,variant:"outlined"},null,8,["modelValue","label","rules"]),a(n,{modelValue:e.form.contact_tel,"onUpdate:modelValue":o[5]||(o[5]=l=>e.form.contact_tel=l),label:t.$t("base.customer.contact_tel"),rules:e.rules.contact_tel,variant:"outlined"},null,8,["modelValue","label","rules"])]),_:1},512)]),_:1}),a(x,{class:"justify-end"},{default:s(()=>[a(p,{variant:"text",onClick:c.closeDialog},{default:s(()=>[v(b(t.$t("system.page.close")),1)]),_:1},8,["onClick"]),a(p,{color:"primary",variant:"text",onClick:c.submit},{default:s(()=>[v(b(t.$t("system.page.submit")),1)]),_:1},8,["onClick"]),a(p,{color:"primary",variant:"text",onClick:c.print},{default:s(()=>[v(b(t.$t("system.page.print")),1)]),_:1},8,["onClick"])]),_:1})]),_:1}),a(O,{ref_key:"hprintDialogRef",ref:V,form:e.form,"tab-page":"print_page_detail"},null,8,["form"])]),_:1},8,["modelValue"])}}});const te=z(A,[["__scopeId","data-v-b53143e7"]]);export{te as default};
