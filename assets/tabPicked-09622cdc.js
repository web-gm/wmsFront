import{i as p,w as $}from"./i18n-0af8b262.js";import{a as M,b as C}from"./style-b9bc59b4.js";import{D as F,a as I,c as V,P as x,b as S}from"./system-93ae242b.js";import{a as T}from"./index-cd6d6b34.js";import{k as E}from"./deliveryManagement-7eebd823.js";import{_ as z}from"./tooltip-btn.vue_vue_type_script_setup_true_lang-fc6ce76f.js";import{G as v}from"./commodityManagement-a1debff9.js";import{g as q,s as L}from"./common-938b41ea.js";import{_ as A}from"./search-delivered-detail.vue_vue_type_script_setup_true_lang-20446111.js";import{e as U}from"./exportTable-b0d17537.js";import{B}from"./btnGroup-26ff2079.js";import{d as G,b as m,r as y,o as H,c as b,w as O,a as c,x as j,m as N,u,q as e,s,y as K,at as h,ap as n,as as R,O as W}from"./runtime-core.esm-bundler-1bbee395.js";import{_ as Z}from"./_plugin-vue_export-helper-c27b6911.js";import"./index-f4e4efab.js";import"./request-e1053d5a.js";import"./index-827f2091.js";import"./vue-router-1283ad2d.js";import"./index-ae8f073f.js";const Y={class:"operateArea"},J={style:{width:"100%",display:"flex","justify-content":"center"}},Q=G({__name:"tabPicked",setup(X,{expose:w}){const _=m(),t=y({showDeliveredDetailID:0,showDeliveredDetail:!1,dialogForm:{id:0},searchForm:{dispatch_no:"",customer_name:"",spu_name:""},timer:m(null),activeTab:null,tableData:m([]),tablePage:m({total:0,pageIndex:1,pageSize:F,searchObjects:[]}),btnList:[],authorityList:q()}),r=y({closeDeliveredDetail:()=>{t.showDeliveredDetail=!1},viewRow:a=>{t.showDeliveredDetailID=a.id,t.showDeliveredDetail=!0},refresh:()=>{r.getPicked()},getPicked:async()=>{const{data:a}=await E(t.tablePage);if(!a.isSuccess){T.$message({type:"error",content:a.errorMessage});return}t.tableData=a.data.rows,t.tablePage.total=a.data.totals},handlePageChange:m(({currentPage:a,pageSize:i})=>{t.tablePage.pageIndex=a,t.tablePage.pageSize=i,r.getPicked()}),exportTable:()=>{const a=_.value;U({table:a,filename:p.global.t("wms.deliveryManagement.picked"),columnFilterMethod({column:i}){return!["checkbox"].includes(i==null?void 0:i.type)&&!["operate"].includes(i==null?void 0:i.field)}})},sureSearch:()=>{t.tablePage.searchObjects=L(t.searchForm),r.getPicked()}});H(()=>{t.btnList=[{name:p.global.t("system.page.refresh"),icon:"mdi-refresh",code:"",click:r.refresh},{name:p.global.t("system.page.export"),icon:"mdi-export-variant",code:"picked-export",click:r.exportTable}]});const D=b(()=>M({})),k=b(()=>C({}));return O(()=>t.searchForm,()=>{t.timer&&clearTimeout(t.timer),t.timer=setTimeout(()=>{t.timer=null,r.sureSearch()},I)},{deep:!0}),w({getPicked:r.getPicked}),(a,i)=>{const d=c("v-col"),g=c("v-text-field"),f=c("v-row"),l=c("vxe-column"),P=c("vxe-table");return j(),N(W,null,[u("div",Y,[e(f,{"no-gutters":""},{default:s(()=>[e(d,{cols:"3",class:"col"},{default:s(()=>[e(B,{"authority-list":t.authorityList,"btn-list":t.btnList},null,8,["authority-list","btn-list"])]),_:1}),e(d,{cols:"9"},{default:s(()=>[e(f,{"no-gutters":"",onKeyup:$(r.sureSearch,["enter"])},{default:s(()=>[e(d,{cols:"4"},{default:s(()=>[e(g,{modelValue:t.searchForm.dispatch_no,"onUpdate:modelValue":i[0]||(i[0]=o=>t.searchForm.dispatch_no=o),clearable:"","hide-details":"",density:"comfortable",class:"searchInput ml-5 mt-1",label:a.$t("wms.deliveryManagement.dispatch_no"),variant:"solo"},null,8,["modelValue","label"])]),_:1}),e(d,{cols:"4"},{default:s(()=>[e(g,{modelValue:t.searchForm.customer_name,"onUpdate:modelValue":i[1]||(i[1]=o=>t.searchForm.customer_name=o),clearable:"","hide-details":"",density:"comfortable",class:"searchInput ml-5 mt-1",label:a.$t("wms.deliveryManagement.customer_name"),variant:"solo"},null,8,["modelValue","label"])]),_:1}),e(d,{cols:"4"},{default:s(()=>[e(g,{modelValue:t.searchForm.spu_name,"onUpdate:modelValue":i[2]||(i[2]=o=>t.searchForm.spu_name=o),clearable:"","hide-details":"",density:"comfortable",class:"searchInput ml-5 mt-1",label:a.$t("wms.deliveryManagement.spu_name"),variant:"solo"},null,8,["modelValue","label"])]),_:1})]),_:1},8,["onKeyup"])]),_:1})]),_:1})]),u("div",{class:"mt-5",style:R({height:n(D)})},[e(P,{ref_key:"xTable",ref:_,"column-config":{minWidth:"100px"},data:t.tableData,height:n(k),align:"center"},{empty:s(()=>[K(h(n(p).global.t("system.page.noData")),1)]),default:s(()=>[e(l,{type:"seq",width:"60"}),e(l,{field:"dispatch_no",title:a.$t("wms.deliveryManagement.dispatch_no")},null,8,["title"]),e(l,{field:"spu_code",title:a.$t("wms.deliveryManagement.spu_code")},null,8,["title"]),e(l,{field:"spu_description",width:"200px",title:a.$t("wms.deliveryManagement.spu_description")},null,8,["title"]),e(l,{field:"spu_name",title:a.$t("wms.deliveryManagement.spu_name")},null,8,["title"]),e(l,{field:"sku_code",title:a.$t("wms.deliveryManagement.sku_code")},null,8,["title"]),e(l,{field:"bar_code",title:a.$t("wms.deliveryManagement.bar_code")},null,8,["title"]),e(l,{field:"qty",title:a.$t("wms.deliveryManagement.order_qty")},null,8,["title"]),e(l,{field:"unpicked_qty",title:a.$t("wms.deliveryManagement.unpicked_qty")},null,8,["title"]),e(l,{field:"picked_qty",title:a.$t("wms.deliveryManagement.picked_qty")},null,8,["title"]),e(l,{field:"weight",title:a.$t("wms.deliveryManagement.detailWeight")},{default:s(({row:o})=>[u("span",null,h(`${o.volume} ${n(v)("weight",o.volume_unit)}`),1)]),_:1},8,["title"]),e(l,{field:"volume",title:a.$t("wms.deliveryManagement.detailVolume")},{default:s(({row:o})=>[u("span",null,h(`${o.volume} ${n(v)("volume",o.volume_unit)}`),1)]),_:1},8,["title"]),e(l,{field:"customer_name",title:a.$t("wms.deliveryManagement.customer_name")},null,8,["title"]),e(l,{field:"creator",title:a.$t("wms.deliveryManagement.creator")},null,8,["title"]),e(l,{field:"create_time",width:"170px",formatter:["formatDate","yyyy-MM-dd HH:mm"],title:a.$t("wms.deliveryManagement.create_time")},null,8,["title"]),e(l,{field:"operate",title:a.$t("system.page.operate"),width:"120",resizable:!1,"show-overflow":""},{default:s(({row:o})=>[u("div",J,[e(z,{flat:!0,icon:"mdi-eye-outline","tooltip-text":a.$t("system.page.view"),onClick:ee=>r.viewRow(o)},null,8,["tooltip-text","onClick"])])]),_:1},8,["title"])]),_:1},8,["data","height"]),e(V,{"current-page":t.tablePage.pageIndex,"page-size":t.tablePage.pageSize,perfect:"",total:t.tablePage.total,"page-sizes":n(x),layouts:n(S),onPageChange:r.handlePageChange},null,8,["current-page","page-size","total","page-sizes","layouts","onPageChange"]),e(A,{id:t.showDeliveredDetailID,"show-dialog":t.showDeliveredDetail,onClose:r.closeDeliveredDetail},null,8,["id","show-dialog","onClose"])],4)],64)}}});const ye=Z(Q,[["__scopeId","data-v-7b90a7aa"]]);export{ye as default};
