import{i as l}from"./i18n-0af8b262.js";import{a as g}from"./index-cd6d6b34.js";import{a as D,u as F}from"./freightSetting-4f9f7a61.js";import{S as m,a as u}from"./formRule-3feb276f.js";import{r as B}from"./common-938b41ea.js";import{d as O,b as y,c as h,r as $,w as R,a as i,x as j,v as q,s,q as o,y as V,at as S,ap as L,ac as M}from"./runtime-core.esm-bundler-1bbee395.js";import{_ as z}from"./_plugin-vue_export-helper-c27b6911.js";import"./request-e1053d5a.js";import"./index-f4e4efab.js";import"./index-827f2091.js";import"./vue-router-1283ad2d.js";import"./index-ae8f073f.js";const A=O({__name:"add-or-update-freight",props:{showDialog:{type:Boolean},form:null},emits:["close","saveSuccess"],setup(w,{emit:f}){const p=w,v=y(),d=h(()=>p.showDialog),k=h(()=>p.form.id&&p.form.id>0?"update":"add"),t=$({form:y({id:0,carrier:"",departure_city:"",arrival_city:"",price_per_weight:0,price_per_volume:0,min_payment:0,is_valid:!0}),rules:{carrier:[e=>!!e||`${l.global.t("system.checkText.mustInput")}${l.global.t("base.freightSetting.carrier")}!`,e=>m(e,0,256)===""||m(e,0,256)],departure_city:[e=>!!e||`${l.global.t("system.checkText.mustInput")}${l.global.t("base.freightSetting.departure_city")}!`,e=>m(e,0,128)===""||m(e,0,128)],arrival_city:[e=>!!e||`${l.global.t("system.checkText.mustInput")}${l.global.t("base.freightSetting.arrival_city")}!`,e=>m(e,0,128)===""||m(e,0,128)],price_per_weight:[e=>!!e||`${l.global.t("system.checkText.mustInput")}${l.global.t("base.freightSetting.price_per_weight")}!`,e=>u(e,"nonNegative",6,2)===""||u(e,"nonNegative",6,2)],price_per_volume:[e=>!!e||`${l.global.t("system.checkText.mustInput")}${l.global.t("base.freightSetting.price_per_volume")}!`,e=>u(e,"nonNegative",6,2)===""||u(e,"nonNegative",6,2)],min_payment:[e=>!!e||`${l.global.t("system.checkText.mustInput")}${l.global.t("base.freightSetting.min_payment")}!`,e=>u(e,"nonNegative",8,2)===""||u(e,"nonNegative",8,2)],is_valid:[]}}),_=$({closeDialog:()=>{f("close")},initForm:()=>{t.form=p.form},submit:async()=>{const{valid:e}=await v.value.validate();if(e){const r=B(t.form),{data:c}=k.value==="add"?await D(r):await F(r);if(!c.isSuccess){g.$message({type:"error",content:c.errorMessage});return}g.$message({type:"success",content:`${l.global.t("system.page.submit")}${l.global.t("system.tips.success")}`}),f("saveSuccess")}else g.$message({type:"error",content:l.global.t("system.checkText.checkFormFail")})}});return R(()=>d.value,e=>{e&&_.initForm()}),(e,r)=>{const c=i("v-toolbar"),n=i("v-text-field"),x=i("v-switch"),U=i("v-form"),N=i("v-card-text"),b=i("v-btn"),T=i("v-card-actions"),C=i("v-card"),I=i("v-dialog");return j(),q(I,{modelValue:L(d),"onUpdate:modelValue":r[7]||(r[7]=a=>M(d)?d.value=a:null),width:"30%",transition:"dialog-top-transition",persistent:!0},{default:s(()=>[o(C,null,{default:s(()=>[o(c,{color:"white",title:`${e.$t("router.sideBar.freightSetting")}`},null,8,["title"]),o(N,null,{default:s(()=>[o(U,{ref_key:"formRef",ref:v},{default:s(()=>[o(n,{modelValue:t.form.carrier,"onUpdate:modelValue":r[0]||(r[0]=a=>t.form.carrier=a),label:e.$t("base.freightSetting.carrier"),rules:t.rules.carrier,variant:"outlined"},null,8,["modelValue","label","rules"]),o(n,{modelValue:t.form.departure_city,"onUpdate:modelValue":r[1]||(r[1]=a=>t.form.departure_city=a),label:e.$t("base.freightSetting.departure_city"),rules:t.rules.departure_city,variant:"outlined"},null,8,["modelValue","label","rules"]),o(n,{modelValue:t.form.arrival_city,"onUpdate:modelValue":r[2]||(r[2]=a=>t.form.arrival_city=a),label:e.$t("base.freightSetting.arrival_city"),rules:t.rules.arrival_city,variant:"outlined"},null,8,["modelValue","label","rules"]),o(n,{modelValue:t.form.price_per_weight,"onUpdate:modelValue":r[3]||(r[3]=a=>t.form.price_per_weight=a),label:e.$t("base.freightSetting.price_per_weight"),rules:t.rules.price_per_weight,variant:"outlined"},null,8,["modelValue","label","rules"]),o(n,{modelValue:t.form.price_per_volume,"onUpdate:modelValue":r[4]||(r[4]=a=>t.form.price_per_volume=a),label:e.$t("base.freightSetting.price_per_volume"),rules:t.rules.price_per_volume,variant:"outlined"},null,8,["modelValue","label","rules"]),o(n,{modelValue:t.form.min_payment,"onUpdate:modelValue":r[5]||(r[5]=a=>t.form.min_payment=a),label:e.$t("base.freightSetting.min_payment"),rules:t.rules.min_payment,variant:"outlined"},null,8,["modelValue","label","rules"]),o(x,{modelValue:t.form.is_valid,"onUpdate:modelValue":r[6]||(r[6]=a=>t.form.is_valid=a),color:"primary",label:e.$t("base.freightSetting.is_valid"),rules:t.rules.is_valid},null,8,["modelValue","label","rules"])]),_:1},512)]),_:1}),o(T,{class:"justify-end"},{default:s(()=>[o(b,{variant:"text",onClick:_.closeDialog},{default:s(()=>[V(S(e.$t("system.page.close")),1)]),_:1},8,["onClick"]),o(b,{color:"primary",variant:"text",onClick:_.submit},{default:s(()=>[V(S(e.$t("system.page.submit")),1)]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}}});const te=z(A,[["__scopeId","data-v-1acdb21b"]]);export{te as default};
