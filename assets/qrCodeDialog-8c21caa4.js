import{V as R}from"./vue-qr-da17c00d.js";import{b as P,c as k}from"./common-938b41ea.js";import{d as S,r as v,c as Q,a as n,b2 as U,x as d,v as c,s as a,q as s,u as r,as as B,m as f,b0 as T,O as q,y as w,at as b,t as A,ap as z,b1 as L}from"./runtime-core.esm-bundler-1bbee395.js";import{_ as M}from"./_plugin-vue_export-helper-c27b6911.js";const O={class:"print-area-container"},j={class:"print-area-scroll"},E={class:"printLabel"},F={class:"row-number-input"},I={class:"colText"},J={class:"colText"},H={class:"padding-lr-16"},K=S({__name:"qrCodeDialog",props:{menu:null},setup(D,{expose:y}){const p=D,e=v({showDialog:!1,printData:[],printText:"",rowsNumber:5,gridColumnGap:15,gridRowGap:15}),h=Q(()=>e.printData.length===0),i=v({changePrintParams:()=>{const t={cols:e.rowsNumber,rs:e.gridRowGap};P(`QRCode-${p.menu}`,t)},openDialog:t=>{try{const o=k(`QRCode-${p.menu}`);o&&(e.rowsNumber=o.cols,e.gridRowGap=o.rs)}catch{e.rowsNumber=5,e.gridRowGap=15}e.printData=t,e.showDialog=!0},formatPrintData:t=>JSON.stringify({id:t.id,type:t.type}),closeDialog:()=>{e.showDialog=!1}});return y({openDialog:i.openDialog,closeDialog:i.closeDialog}),(t,o)=>{const V=n("v-card-text"),u=n("v-text-field"),m=n("v-col"),x=n("v-row"),_=n("v-btn"),C=n("v-card-actions"),G=n("v-card"),N=n("v-dialog"),$=U("print");return d(),c(N,{modelValue:e.showDialog,"onUpdate:modelValue":o[2]||(o[2]=l=>e.showDialog=l),width:"auto",transition:"dialog-top-transition",persistent:!0},{default:a(()=>[s(G,{title:t.$t("system.page.preView")},{default:a(()=>[s(V,null,{default:a(()=>[r("div",O,[r("div",j,[r("div",{id:"printArea",class:"printArea",style:B({"grid-template-columns":`repeat(${e.rowsNumber},1fr)`,rowGap:`${e.gridRowGap}px`,columnGap:`${e.gridColumnGap}px`})},[(d(!0),f(q,null,T(e.printData,(l,g)=>(d(),f("div",{key:g,class:"code-container"},[r("div",null,[(d(),c(R,{key:g,size:150,"auto-color":!0,"dot-scale":1,text:i.formatPrintData(l)},null,8,["text"]))]),r("div",E,[L(t.$slots,"left",{slotData:l},void 0,!0)])]))),128))],4)])])]),_:3}),s(C,{class:"justify-space-between"},{default:a(()=>[r("div",F,[s(x,{"no-gutters":""},{default:a(()=>[s(m,{cols:"6",class:"col"},{default:a(()=>[r("div",I,[s(u,{modelValue:e.rowsNumber,"onUpdate:modelValue":[o[0]||(o[0]=l=>e.rowsNumber=l),i.changePrintParams],modelModifiers:{number:!0},"hide-details":"auto",label:t.$t("system.page.rowsNumber")},null,8,["modelValue","label","onUpdate:modelValue"])])]),_:1}),s(m,{cols:"6",class:"col"},{default:a(()=>[r("div",J,[s(u,{modelValue:e.gridRowGap,"onUpdate:modelValue":[o[1]||(o[1]=l=>e.gridRowGap=l),i.changePrintParams],modelModifiers:{number:!0},"hide-details":"auto",label:t.$t("system.page.gridRowGap")},null,8,["modelValue","label","onUpdate:modelValue"])])]),_:1})]),_:1})]),r("div",H,[s(_,{variant:"text",onClick:i.closeDialog},{default:a(()=>[w(b(t.$t("system.page.close")),1)]),_:1},8,["onClick"]),A((d(),c(_,{color:"primary",disabled:z(h),variant:"text"},{default:a(()=>[w(b(t.$t("system.page.print")),1)]),_:1},8,["disabled"])),[[$,"#printArea"]])])]),_:1})]),_:3},8,["title"])]),_:3},8,["modelValue"])}}});const ee=M(K,[["__scopeId","data-v-555fd297"]]);export{ee as Q};
